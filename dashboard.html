<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Dashboard</title>
        <script src="//unpkg.com/chart.js"></script>
        <script type="module" src="https://esm.sh/interestfor"></script>
        <script type="module" src="https://esm.sh/invokers-polyfill"></script>
        <style>
            @import url(//unpkg.com/normalize.css) layer(normalize);
            @import url(./dist/landsoul.css) layer(landsoul);
            @import url(./dist/extra.css) layer(extra);

            :root,
            body {
                height: 100%;
                overflow: hidden;
            }

            #root {
                min-height: 100vh;
                display: grid;
                grid-template:
                    "header header" min-content
                    "main main" 1fr
                    "footer footer" auto
                    / 1fr;

                @media (width >= 720px) {
                    height: 100vh;
                    overflow: hidden;
                    grid-template:
                        "header header header" min-content
                        "nav main main" 1fr
                        "footer footer footer" auto
                        / auto 1fr 1fr;

                    /* hide the menu button in wide screen */
                    [popovertarget="menu"] {
                        display: none;
                    }

                    nav#menu {
                        all: unset; /* disable the popover behavior, make nav a regular element */
                        grid-area: nav;
                        box-sizing: border-box;
                        width: 320px;
                        padding: 1rem;
                        display: flex;
                        flex-direction: column;
                        overflow-y: auto;
                        border-right: solid 1px var(--landsoul-surface);
                        color: var(--landsoul-text);
                        background-color: var(--landsoul-bg);
                    }
                }

                nav#menu {
                    user-select: none;
                }
            }

            .header {
                grid-area: header;
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 0.5rem 1rem;
                border-bottom: solid 1px var(--landsoul-surface);

                @media (width < 720px) {
                    position: sticky;
                    top: 0;
                    background-color: var(--landsoul-bg);
                    z-index: 10;
                }

                .title {
                    font-weight: 500;
                    margin: 0;
                    padding: 0;
                }
            }

            .main {
                grid-area: main;
                padding: 1rem;
                scrollbar-gutter: stable;

                @media (width >= 720px) {
                    overflow-y: auto;
                }
            }

            .footer {
                grid-area: footer;
                padding: 1rem;
                border-top: solid 1px var(--landsoul-surface);
                display: flex;
                flex-wrap: wrap;
                gap: 1rem;
                align-items: center;
                justify-content: space-between;
            }
            
            .card {
                border: 1px solid var(--landsoul-surface);
                border-radius: var(--landsoul-radius);
                padding: 1rem;
                margin-top: 1rem;
            }

            img {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
            }

            .pixiv-item {
                display: inline-flex;
                flex-direction: column;
                justify-content: space-between;
                gap: 0.5rem;
                padding: 0.5rem;
                box-sizing: border-box;
                height: 30lh;
            }

            .space-between {
                display: flex;
                justify-content: space-between;
            }

            .inline-full {
                box-sizing: border-box;
                inline-size: 100%;
            }
        </style>
    </head>
    <body>
        <div id="root">
            <!-- Navigation: popover on compact, sidebar on wide -->
            <nav id="menu" class="landsoul-drawer" popover="auto">
                <h6 popovertarget="menu" popovertargetaction="hide">Landsoul</h6>

                <div class="space-between">
                    <span>My Projects</span>
                    <!-- <span class="landsoul-tooltip landsoul-tooltip-bottom" data-tip="Create New Project">
                        <button>+</button>
                    </span> -->
                    <button interestfor="create-new-project" style="interest-delay: 0.2s;">+</button>
                    <span class="landsoul-popover-top" id="create-new-project" popover="hint">Create New Project</span>
                </div> 
                <br />
                <input class="inline-full" type="search" placeholder="Search..." />
                <br />
                <br />

                <small>Home</small>
                <ul class="landsoul-list">
                    <li class="active">Dashboard</li>
                    <li>Lifecycle</li>
                    <li>Analytics</li>
                    <li>Projects</li>
                    <li>Team</li>
                    <details>
                        <summary>Settings</summary>
                        <ul class="landsoul-list" style="padding-left: 1rem">
                            <li>General</li>
                            <li>Billing</li>
                            <li>Integrations</li>
                        </ul>
                    </details>
                </ul>

                <br />
                <br />

                <small>Documents</small>
                <ul class="landsoul-list">
                    <li>Guides</li>
                    <li>API Reference</li>
                    <li>Tutorials</li>
                    <li>Examples</li>
                    <li>FAQ</li>
                </ul>

                <div style="margin-top: auto;">
                    Account:
                    <select name="pets">
                        <option value="cat">Cat</option>
                        <option value="dog">Dog</option>
                        <option value="hamster">Hamster</option>
                        <option value="parrot">Parrot</option>
                        <option value="spider">Spider</option>
                        <option value="goldfish">Goldfish</option>
                    </select>
                </div>
            </nav>

            <header class="header space-between">
                <div class="space-between" style="gap: 1rem">
                    <button popovertarget="menu" popovertargetaction="show">
                        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M1.5 3C1.22386 3 1 3.22386 1 3.5C1 3.77614 1.22386 4 1.5 4H13.5C13.7761 4 14 3.77614 14 3.5C14 3.22386 13.7761 3 13.5 3H1.5ZM1 7.5C1 7.22386 1.22386 7 1.5 7H13.5C13.7761 7 14 7.22386 14 7.5C14 7.77614 13.7761 8 13.5 8H1.5C1.22386 8 1 7.77614 1 7.5ZM1 11.5C1 11.2239 1.22386 11 1.5 11H13.5C13.7761 11 14 11.2239 14 11.5C14 11.7761 13.7761 12 13.5 12H1.5C1.22386 12 1 11.7761 1 11.5Z"
                                fill="currentColor"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                            ></path>
                        </svg>
                    </button>

                    <h6 class="title">Landsoul Example</h6>
                </div>

                <aside>
                    <button popovertarget="settings-popover">
                        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z"
                                fill="currentColor"
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                            ></path>
                        </svg>
                    </button>
                    <div id="settings-popover" popover class="landsoul-popover-left-span-bottom">
                        <ul class="landsoul-list">
                            <details style="padding: 0">
                                <summary>
                                    <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M7.5 0C7.77614 0 8 0.223858 8 0.5V1.80687C10.6922 2.0935 12.8167 4.28012 13.0068 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H12.9888C12.7094 10.6244 10.6244 12.7094 8 12.9888V14.5C8 14.7761 7.77614 15 7.5 15C7.22386 15 7 14.7761 7 14.5V13.0068C4.28012 12.8167 2.0935 10.6922 1.80687 8H0.5C0.223858 8 0 7.77614 0 7.5C0 7.22386 0.223858 7 0.5 7H1.78886C1.98376 4.21166 4.21166 1.98376 7 1.78886V0.5C7 0.223858 7.22386 0 7.5 0ZM8 12.0322V9.5C8 9.22386 7.77614 9 7.5 9C7.22386 9 7 9.22386 7 9.5V12.054C4.80517 11.8689 3.04222 10.1668 2.76344 8H5.5C5.77614 8 6 7.77614 6 7.5C6 7.22386 5.77614 7 5.5 7H2.7417C2.93252 4.73662 4.73662 2.93252 7 2.7417V5.5C7 5.77614 7.22386 6 7.5 6C7.77614 6 8 5.77614 8 5.5V2.76344C10.1668 3.04222 11.8689 4.80517 12.054 7H9.5C9.22386 7 9 7.22386 9 7.5C9 7.77614 9.22386 8 9.5 8H12.0322C11.7621 10.0991 10.0991 11.7621 8 12.0322Z"
                                            fill="currentColor"
                                            fill-rule="evenodd"
                                            clip-rule="evenodd"
                                        ></path>
                                    </svg>
                                    summary
                                </summary>
                                <p>::details-content</p>
                            </details>
                            <hr />
                            <li>User Settings</li>
                            <li>Profile</li>
                            <hr />
                            <li>Logout</li>
                        </ul>
                    </div>
                </aside>
            </header>

            <section class="main">
                <div>
                    <h5>Welcome to Landsoul Dashboard</h5>
                    <p>This is an example dashboard layout using Landsoul styles.</p>
                </div>

                <div class="card">
                    <div class="space-between inline-full">
                        <h6>Total Visitors</h6>
                        <div>
                            <button>Edit</button>
                            <button popovertarget="delete-dialog" popoveraction="show"
                            style="color: var(--landsoul-inverse-text); background-color: var(--landsoul-danger)">Delete</button>
                            <dialog popover id="delete-dialog">
                                <p>Are you sure you want to delete this item?</p>
                                <form method="dialog">
                                    <button value="confirm"
                                    style="color: var(--landsoul-inverse-text); background-color: var(--landsoul-accent)"
                                    popovertarget="delete-dialog" popoveraction="hide">Confirm</button>
                                    <button value="cancel" popovertarget="delete-dialog" popoveraction="hide">Cancel</button>
                                </form>
                            </dialog>
                        </div>
                    </div>
                    <div style="height: 400px">
                        <canvas style="width: 100%" id="myChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div id="js" class="landsoul-carousel" data-height="30lh"></div>
                </div>

                <script type="module">
                    const data = await fetch("https://proxy.scalar.com/?scalar_url=https://www.pixiv.net/ranking.php?format=json", {})
                        .then((res) => res.json())
                        .then((json) => JSON.stringify(json))
                        .then((txt) => txt.replaceAll("https://i.pximg.net/", "https://i.pixiv.re/"))
                        .then((txt) => JSON.parse(txt));

                    console.table(data);

                    const root = document.getElementById("js");
                    data.contents.forEach((item) => {
                        const div = document.createElement("div");
                        div.classList.add("pixiv-item");

                        const title = document.createElement("h6");
                        title.classList.add("landsoul-tooltip");
                        title.classList.add("landsoul-tooltip-bottom");
                        title.textContent = item.title;
                        div.appendChild(title);

                        const img = document.createElement("img");
                        img.src = item.url;
                        img.alt = item.title;
                        div.appendChild(img);

                        const author = document.createElement("small");
                        author.classList.add("landsoul-tooltip-content");
                        author.textContent = "by ";
                        const a = document.createElement("a");
                        a.href = `https://www.pixiv.net/users/${item.user_id}`;
                        a.target = "_blank";
                        a.rel = "noopener noreferrer";
                        a.textContent = item.user_name;
                        author.appendChild(a);
                        title.appendChild(author);

                        root.appendChild(div);
                    });
                </script>
            </section>

            <footer class="footer">
                <ul style="display: flex; gap: 1rem; list-style: none; padding: 0; margin: 0;">
                    <li>
                        <a href="https://github.com/YieldRay/landsoul" target="_blank" rel="noopener noreferrer">Github</a>
                    </li>
                    <li>
                        <a href="https://www.npmjs.com/package/landsoul" target="_blank" rel="noopener noreferrer">NPM</a>
                    </li>
                </ul>

                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <label><input name="color-scheme" type="radio" value="light dark" checked />System</label>
                    <label><input name="color-scheme" type="radio" value="light" /> Light</label>
                    <label><input name="color-scheme" type="radio" value="dark" /> Dark</label>
                </div>
            </footer>
        </div>
    </body>

    <script>
        // Close popover when switching to wide layout to prevent top-layer promotion
        matchMedia("(width >= 720px)").onchange = (e) => {
            if (e.matches) {
                document.getElementById("menu").hidePopover();
            }
        };

        const ctx = document.getElementById('myChart');

        // Generate data similar to the provided image
        const labels = [];
        const mobileData = [];
        const desktopData = [];
        const count = 86; // Approx number of days from Apr 6 to Jun 30

        for (let i = 0; i < count; i++) {
            const date = new Date(2023, 3, 6 + i); // Start from Apr 6
            labels.push(date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric'
            }));

            const t = i * 0.6;
            let shape = Math.abs(Math.sin(t));
            shape = Math.pow(shape, 1.2);
            const amplitude = 120 + Math.sin(i * 0.1) * 40 + Math.cos(i * 0.23) * 30;
            const noise = Math.random() * 15;
            const value = shape * amplitude + 50;

            mobileData.push(Math.floor(value + noise + 50));
            desktopData.push(Math.floor(value * 0.7 + noise + 30));
        }

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Mobile',
                    data: mobileData,
                    fill: true,
                    borderColor: '#333',
                    backgroundColor: 'rgba(50, 50, 50, 0.5)',
                    tension: 0.4,
                    pointRadius: 0,
                    pointHoverRadius: 4,
                    borderWidth: 1
                }, {
                    label: 'Desktop',
                    data: desktopData,
                    fill: true,
                    borderColor: '#666',
                    backgroundColor: 'rgba(100, 100, 100, 0.5)',
                    tension: 0.4,
                    pointRadius: 0,
                    pointHoverRadius: 4,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        titleColor: '#000',
                        bodyColor: '#333',
                        borderColor: '#ddd',
                        borderWidth: 1,
                        padding: 8,
                        usePointStyle: true,
                        titleFont: {
                            size: 14,
                            weight: 'normal'
                        },
                        bodyFont: {
                            size: 13
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            maxTicksLimit: 10,
                            maxRotation: 0,
                            color: '#666'
                        }
                    },
                    y: {
                        display: false,
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</html>
