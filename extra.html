<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>landsoul-utils</title>
    <style>
        @import url(./dist/landsoul.css) layer(landsoul);
        @import url(./dist/extra.css) layer(extra);
        @import url(./shj.css);

        section {
            border: dashed var(--landsoul-border);
            border-radius: var(--landsoul-radius);
            padding: 1rem;
            margin-bottom: 1rem;

            h1 {
                margin-top: 0;
                font-size: 1.25rem;
                margin-bottom: 1rem;
            }
        }

        body {
            max-width: 600px;
            margin: 2rem auto;
        }
    </style>
    <script type="module">
        import { highlightElement } from 'https://unpkg.com/@speed-highlight/core/dist/index.js';
        const renderer = document.getElementById('renderer');

        function writeExample(id, omitParent = false) {
            const el = document.getElementById(id);
            const cloned = el.cloneNode(true);
            cleanDOMRecursive(cloned);
            const pre = document.createElement('pre');
            const rawCode = omitParent ? cloned.innerHTML : cloned.outerHTML;
            pre.textContent = formatHTML(rawCode);
            highlightElement(pre, 'html');
            el.insertAdjacentElement('afterend', pre);
        }
        function cleanDOMRecursive(node) {
            node.removeAttribute('id');
            for (const child of node.children) {
                cleanDOMRecursive(child);
            }
        }
        function formatHTML(rawCode) {
            const renderNode = document.createElement('div');
            renderNode.textContent = rawCode;
            renderNode.style.whiteSpace = 'pre-line';
            renderer.appendChild(renderNode); //! Must append to DOM for browser to measuring correct innerText
            const code = renderNode.innerText;
            renderNode.remove();
            return code.trim().replaceAll(`popover=""`, 'popover')
        }

        globalThis.writeExample = writeExample;
        document.querySelectorAll('[class*=shj-lang-]').forEach((el) => highlightElement(el, el.className.match(/shj-lang-([a-z0-9]+)/)[1]));
    </script>
</head>

<body>
    <div id="renderer" style="width: 0; height: 0; overflow: hidden;"></div>

    <header>
        <h1>Landsoul Extra</h1>
        <pre class="shj-lang-html">&lt;link rel="stylesheet" href="//unpkg.com/landsoul/dist/extra.css" /&gt;</pre>
        <pre class="shj-lang-css">@import url(//unpkg.com/landsoul/dist/extra.css) layer(extra);</pre>
        <label><input name="color-scheme" type="radio" value="light dark" checked />System</label>
        <label><input name="color-scheme" type="radio" value="light" /> Forced Light</label>
        <label><input name="color-scheme" type="radio" value="dark" /> Forced Dark</label>
    </header>
    <br />

    <section>
        <h1>.landsoul-divider</h1>
        <div class="landsoul-divider" role="separator" id="$divider">Divider Content</div>
        <script type="module">writeExample("$divider")</script>
    </section>

    <section>
        <h1>.landsoul-drawer</h1>

        <div id="$drawer">
            <button popovertarget="drawer">Open Drawer</button>
            <div class="landsoul-drawer" id="drawer" popover>left</div>

            <button popovertarget="drawer-bottom">Open Drawer (bottom)</button>
            <div class="landsoul-drawer landsoul-drawer-bottom" id="drawer-bottom" popover>bottom</div>

            <button popovertarget="drawer-right">Open Drawer (right)</button>
            <div class="landsoul-drawer landsoul-drawer-right" id="drawer-right" popover>right</div>

            <button popovertarget="drawer-top">Open Drawer (top)</button>
            <div class="landsoul-drawer landsoul-drawer-top" id="drawer-top" popover>top</div>
        </div>
        <script type="module">writeExample("$drawer", true)</script>
    </section>

    <section>
        <h1>.landsoul-dropdown</h1>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;" id="$dropdown">
            <span style="anchor-scope: --landsoul-dropdown">
                <button popovertarget="dropdown" style="anchor-name: --landsoul-dropdown">Bottom</button>
                <div class="landsoul-dropdown-bottom" id="dropdown" popover>Dropdown<br />Content</div>
            </span>

            <span style="anchor-scope: --landsoul-dropdown">
                <button popovertarget="dropdown-top" style="anchor-name: --landsoul-dropdown">Top</button>
                <div class="landsoul-dropdown-top" id="dropdown-top" popover>Dropdown<br />Content</div>
            </span>

            <span style="anchor-scope: --landsoul-dropdown">
                <button popovertarget="dropdown-left" style="anchor-name: --landsoul-dropdown">Left</button>
                <div class="landsoul-dropdown-left" id="dropdown-left" popover>Dropdown<br />Content</div>
            </span>

            <span style="anchor-scope: --landsoul-dropdown">
                <button popovertarget="dropdown-right" style="anchor-name: --landsoul-dropdown">Right</button>
                <div class="landsoul-dropdown-right" id="dropdown-right" popover>Dropdown<br />Content
                </div>
            </span>
        </div>
        <script type="module">writeExample("$dropdown", true)</script>
    </section>

    <section>
        <h1>.landsoul-list</h1>
        <ul class="landsoul-list" id="$list">
            <li>Item 1</li>
            <li>Item 2</li>
            <li class="active">Item 3</li>
        </ul>
        <script type="module">writeExample("$list")</script>
    </section>

    <section>
        <h1>.landsoul-skeleton</h1>
        <div class="landsoul-skeleton" style="width: 200px; height: 20px;" id="$skeleton"></div>
        <script type="module">writeExample("$skeleton")</script>
    </section>

    <section>
        <h1>.landsoul-spinner</h1>
        <div class="landsoul-spinner" id="$spinner1"></div>
        <button class="landsoul-spinner" id="$spinner2">Submitting...</button>
        <script type="module">
            writeExample("$spinner1");
            writeExample("$spinner2");
        </script>
    </section>


    <section>
        <h1>.landsoul-switch</h1>
        <label id="$switch">
            <input type="checkbox" class="landsoul-switch" role="switch" />
            Toggle Switch
        </label>
        <script type="module">writeExample("$switch", true)</script>
    </section>

    <section>
        <h1>.landsoul-tooltip</h1>
        <div style="display: flex; gap: 2rem; flex-wrap: wrap; justify-content: center; padding: 2rem;" id="$tooltip">
            <button class="landsoul-tooltip landsoul-tooltip-top" data-tip="Top tooltip">Top</button>
            <button class="landsoul-tooltip landsoul-tooltip-bottom" data-tip="Bottom tooltip">Bottom</button>
            <button class="landsoul-tooltip landsoul-tooltip-left" data-tip="Left tooltip">Left</button>
            <button class="landsoul-tooltip landsoul-tooltip-right" data-tip="Right tooltip">Right</button>
        </div>
        <script type="module">writeExample("$tooltip", true)</script>
    </section>
</body>

</html>